<html>

        <head>
        <title> Дашборд  </title>

    </head>
    <body>
     {{={| |}=}}       

        <div class="row " id="vapp">
        
           
            <div class="col-12 ">
                <h3>Дашборд</h3>
                <a onclick="updateSiteMap()"  href="javascript:void(0)"  class="btn btn-outline-info"> Оновити sitemap.xml</a>
                
            </div>
           <div class="col-12 text-center ">
                <h4>Статистика за останнi 30 днiв</h4>

                
            </div>
            <div class="col-12 col-md-6">
               
                 <div   class="card ">
                    <div   class="card-body">

                        <canvas style="width:100%" id="grvisit"></canvas>
                    </div>
                </div>                  
            </div>
            <div class="col-12 col-md-6">
                
               <div   class="card ">
                    <div   class="card-body">

                        <canvas style="width:100%" id="grorders"></canvas>
                    </div>
                </div>                  
            
            </div>
 
            
        </div>
        
        
      {|={{ }}=|}     
        
  
        <script language="javascript" src="/assets/js/chart.js"></script>

        <script>
        
    var fontcolor='#000' ;
        {{#darkmode}}
            fontcolor='#fff' ;
        {{/darkmode}}   
     
 //посетители  
var visData = {
labels  : {{{grvisdays}}},
        datasets: [
        {
     
                backgroundColor         : 'rgba(60,141,188,0.8)',
                borderColor         : 'rgba(60,141,188,0.8)',
                fill          : true,
                data                :  {{{grviscnt}}}
        } 
    
        ]
}

   

var visOptions = {
title: {
display: true,   
fontColor: fontcolor,
text: 'Вiдвiдувачi сайту  '
},
legend: {
display: false     
},

 

        scales: {
        xAxes: [{     ticks: { 
                   fontColor: fontcolor 
             },
        gridLines : {
        display : false,
        }
        }],
                yAxes: [{    ticks: { 
                   fontColor: fontcolor 
             },
                gridLines : {
                display : false,
                }
                }]
        }
}   
     
 //заказы  
var orderData = {
labels  : {{{grordersdays}}},
        datasets: [
        {
     
                backgroundColor         : 'rgba(60,141,188,0.8)',
                borderColor         : 'rgba(60,141,188,0.8)',
                fill          : true,
                data                :  {{{grorderscnt}}}
        } 
    
        ]
}

   

var orderOptions = {
title: {
display: true,   
fontColor: fontcolor,
text: 'Замовлення  '
},
legend: {
display: false     
},

 

        scales: {
        xAxes: [{     ticks: { 
                   fontColor: fontcolor 
             },
        gridLines : {
        display : false,
        }
        }],
                yAxes: [{    ticks: { 
                   fontColor: fontcolor 
             },
                gridLines : {
                display : false,
                }
                }]
        }
}   
     
     
window.onload = function() {     
         new Chart(document.querySelector('#grvisit'), {
        type: 'line',
                data: visData,
                options: visOptions
        })
    
        new Chart(document.querySelector('#grorders'), {
        type: 'line',
                data: orderData,
                options: orderOptions
        })


};    


   function updateSiteMap(){
            
          callPageMethod('updateSiteMap',null,null,(data)=> 
          {
             toastr.success('Оновлено','',{'timeOut':'2000'})  
          });           
      
   }

        </script>

    </body>
</html>