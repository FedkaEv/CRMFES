<html>
 <head>
        <title>  Журнал системних повiдомлень  </title>

    </head>

    <body>
      {{={| |}=}}   
        <div class="row">
            <div class="col-12 col-md-8 col-xl-6" id="vapp">
                <h4>Журнал системних повiдомлень</h4>
                <div class="navbar nav">
                    <form  zippy="filter" class="form-inline ">


                        <input   class="form-control mr-2" type="text" zippy="searchtext" placeholder="Пошук  по  контенту">

                        <input   type="submit" class="  btn btn-outline-success  " value="Шукати">


                    </form>
                </div>

                <table class="table table-sm    ">
                    <tr  zippy="nlist">

                        <td><i class="fa fa-clock"> </i> <span zippy="ndate" > </span>

                            <p zippy="msg" >
                            <p>
                        </td>
                        <td><span  zippy="newn" class="badge badge-info">Нове</span></td>


                    </tr>
                </table>
                <div zippy="pag"></div>              

      
            </div>



        </div>
 
      
      
 
 
 {|={{ }}=|}  
 
 <script>

    var vapp =  Vue.createApp({
       
      data() { return {
          itemlist:[] ,
          rowscnt:0  ,
          searchtext:'' ,
          pagesize:25
      } } ,
     components: {
     //       'paginator': httpVueLoader('/assets/js/vue/paginator.vue')
     'paginator': Vue.defineAsyncComponent( () => loadModule('/assets/js/vue/paginator.vue', vueoptions) )
               
        }, 
        methods: {
            changepage:function( page){    //кнопка  пагинатора
                
                 this.loaddata( (page-1) * this.pagesize );
            }   ,
            loaddata: function(start=0){
                let body={
                    search:this.searchtext,
                    start:start,
                    count:this.pagesize 
                };
                
                  callPageMethod('getItems',null, JSON.stringify(body),(data)=> 
                  {
                      let tmp =   JSON.parse(data)  
                      this.itemlist=  tmp.items
                     
                      this.rowscnt=tmp.cnt
                  
                  });
            }  ,
            onsearch:function (){
                this.rowscnt=0;
                this.loaddata();
            }  
           
            
        }  ,
        mounted: function(){
             this.loaddata();
        }
      
    }).mount('#vapp')   
 
   
  
   
      
      
   //   updateItems();
      
 </script>   
 
          
    </body>

</html>
